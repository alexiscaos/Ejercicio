<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        function iguales(array) {
            let repetido = array[0];
            for (let i = 0; i < array.length; i++) {
                if (array[i] !== repetido) {
                    return false;
                }
            }
            return true;
        }
    
        let numero = prompt('Introduzca un numero de 4 digitos');
        let array = numero.split('');
        let resultado = 0;
        let contador=0;
        while ((array.length > 4  || array.length < 4  )|| iguales(array)) {
            numero = prompt('Solo se puede introducir un numero de 4 digitos');
            array = numero.split('');
            if (iguales(array)) {
                numero = prompt('no introducir numero repetidos');
                array = numero.split('');
            }
        }

        while (resultado !== 6174 || iguales(array)) {

            array.sort((a, b) => a - b);

            let ascendente = Math.floor(array.join(""));
            let descendente = Math.floor(array.reverse().join(""));
            resultado = descendente - ascendente;
            console.log(descendente+' - '+ ascendente+' -> '+ resultado)
            contador++;
            if (resultado == 6174) {
                console.log('Ha encontrado el numero Kaprekar ' + resultado)
            }else if(resultado == 0){
                numero = prompt('Se ha llegado a 0, Introduzca otro numero');
                array = numero.split('');
                contador=0;
            }else{
                numero = resultado.toString();

                array = numero.split('');
            }
            
        }
        console.log('Se ha ha hecho '+contador+' veces la operacion para llegar al numero')



    </script>
</body>

</html>